app = "n8n-workflows-qro"

primary_region = "qro"
kill_signal = "SIGTERM"
kill_timeout = 10

[build]
  

[env]
  DB_TYPE = "postgresdb"
  DB_POSTGRESDB_HOST = "db.supabase.co"
  DB_POSTGRESDB_PORT = "5432"
  DB_POSTGRESDB_USER = "tu_usuario"
  DB_POSTGRESDB_PASSWORD = "tu_contrase√±a"
  DB_POSTGRESDB_DATABASE = "tu_base"
  DB_POSTGRESDB_SSL = "true"

  GENERIC_TIMEZONE = "America/Mexico_City"
  N8N_GIT_REPO_URL = "https://github.com/tu_usuario/tu_repo.git"
  N8N_GIT_AUTO_SYNC = "true"
  N8N_GIT_AUTO_COMMIT = "true"
  N8N_GIT_BRANCH = "main"
  N8N_IMPORT_WORKFLOWS_ON_START = "true"
  N8N_EXPORT_WORKFLOWS_ON_STOP = "true"

[experimental]
  auto_rollback = true

[http_service]
  internal_port = 5678
  force_https = true
  auto_stop_machines = "stop"
  auto_start_machines = true
  min_machines_running = 0
  processes = ["app"]

  [http_service.concurrency]
    type = "connections"
    soft_limit = 20
    hard_limit = 25

  [[http_service.ports]]
    handlers = ["http"]
    port = 80
    force_https = true

  [[http_service.ports]]
    handlers = ["tls", "http"]
    port = 443

  [[http_service.tcp_checks]]
    grace_period = "1s"
    interval = "15s"
    restart_limit = 0
    timeout = "2s"

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 1024